{"version":3,"file":"js/372.c733f2b1.js","mappings":"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","sources":["webpack://passport-frontend/./src/views/DeleteView.vue","webpack://passport-frontend/./src/views/DeleteView.vue?12d2"],"sourcesContent":["<template>\r\n    <body>\r\n        <div class=\"section is-flex is-justify-content-left\">\r\n            <h1 class=\"title\">Delete</h1>\r\n        </div>\r\n        <Suspense>\r\n            <div class=\"section\">\r\n                <div class=\"columns\">\r\n                    <div class=\"column\">\r\n                        <form class=\"box\" @submit.prevent=\"deleteTeam\">\r\n                            <header class=\"card-header\" style=\"background-color: skyblue;\">\r\n                                <p class=\"card-header-title\">\r\n                                    Delete Team\r\n                                </p>\r\n                            </header>\r\n\r\n                            <div class=\"control\">\r\n                                <div class=\"text is-flex\" style=\"padding-top:10px\">\r\n                                    <strong>Team</strong>\r\n                                </div>\r\n                                <div class=\"select is-flex is-flex-direction-column\">\r\n                                    <select id=\"team\" v-model=\"selectedTeam\">\r\n                                        <option v-for=\"team in teams\" :key=\"team.id\" :value=\"team\">{{ team.name }}</option>\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div style=\"padding-top: 10px\"></div>\r\n                            <button class=\"button is-danger\">Delete</button>\r\n                        </form>\r\n                    </div>\r\n\r\n                    <div class=\"column\">\r\n                        <form class=\"box\" @submit.prevent=\"deleteLeague\">\r\n                            <header class=\"card-header\" style=\"background-color: skyblue;\">\r\n                                <p class=\"card-header-title\">\r\n                                    Delete League\r\n                                </p>\r\n                            </header>\r\n\r\n                            <div class=\"control\">\r\n                                <div class=\"text is-flex\" style=\"padding-top:10px\">\r\n                                    <strong>League</strong>\r\n                                </div>\r\n                                <div class=\"select is-flex is-flex-direction-column\">\r\n                                    <select id=\"league\" v-model=\"selectedLeague\">\r\n                                        <option v-for=\"league in leagues\" :key=\"league.id\" :value=\"league\">{{ league.name }}</option>\r\n                                    </select>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div style=\"padding-top: 10px\"></div>\r\n                            <button class=\"button is-danger\">Delete</button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </Suspense>\r\n    </body>\r\n</template>\r\n\r\n\r\n<script>\r\n    import axios from 'axios'\r\n    import { ref, onMounted } from 'vue'\r\n    import AuthService from '@/services/AuthService'\r\n    import router from '@/router'\r\n\r\n    const API_URL = 'http://localhost:3000'\r\n\r\n    export default {\r\n        setup() {\r\n            const teams = ref(null)\r\n            const leagues = ref(null)\r\n\r\n            let token = localStorage.getItem('token') || null\r\n            token = token === null ? null : AuthService.decodeToken(token)\r\n\r\n            if(!token || token.role !== 'admin') {\r\n                router.push({ name: 'home' });\r\n            }\r\n\r\n            onMounted(async () => {\r\n                try {\r\n                    const teamsResponse = await axios.get(`${API_URL}/api/teams`)\r\n                    teams.value = teamsResponse.data\r\n\r\n                    const leaguesResponse = await axios.get(`${API_URL}/api/leagues`)\r\n                    leagues.value = leaguesResponse.data\r\n                } catch(ex) {\r\n                    console.error('error with fetching data: ' + ex)\r\n                }\r\n            })\r\n\r\n            const selectedTeam = ref(null)\r\n\r\n            // const teamWarning = ref(null)\r\n            // teamWarning.value = false\r\n\r\n            const deleteTeam = async ({ team }) => {\r\n                // if(!teamWarning.value) {\r\n                //     teamWarning.value = true\r\n                //     return\r\n                // }\r\n\r\n                const t = ref(null)\r\n                t.value = team ? team : selectedTeam.value\r\n\r\n                console.log('deleting team with name and league:', t.value.name, t.value.league)\r\n\r\n                try {\r\n                    await axios.delete(`${API_URL}/api/teams`, {\r\n                        data: {\r\n                            name: t.value.name,\r\n                            league: t.value.league ? t.value.league : \"NO LEAGUES HERE SORRY GUYS GGS MAN THIS PROJECT IS SO GOOD HOPEFULLY NO ONE CALLS THEIR LEAGUE THIS\"\r\n                        }\r\n                    })\r\n\r\n                    await axios.delete(`${API_URL}/api/events`, {\r\n                        data: {\r\n                            team1: t.value.name\r\n                        }\r\n                    })\r\n\r\n                    await axios.delete(`${API_URL}/api/events`, {\r\n                        data: {\r\n                            team2: t.value.name\r\n                        }\r\n                    })\r\n\r\n                    alert(`Successfully deleted team ${t.value.name}.`)\r\n                } catch(ex) {\r\n                    console.error('error deleting team', ex)\r\n                }\r\n            }\r\n\r\n            const selectedLeague = ref(null)\r\n\r\n            const deleteLeague = async () => {\r\n                const arr = []\r\n\r\n                console.log('deleting league with name:', selectedLeague.value.name)\r\n\r\n                try {\r\n                    teams.value.forEach(team => {\r\n                        if(team.league === selectedLeague.value.name) {\r\n                            arr.push(team)\r\n                            console.log('added to array')\r\n                        }\r\n                    })\r\n\r\n                    while(arr.length > 0) {\r\n                        deleteTeam({ team: arr[arr.length - 1] })\r\n\r\n                        arr.pop()\r\n\r\n                        console.log('deleted from array')\r\n                    }\r\n\r\n                    await axios.delete(`${API_URL}/api/leagues`, {\r\n                        data: {\r\n                            name: selectedLeague.value.name\r\n                        }\r\n                    })\r\n\r\n                    alert(`Successfully deleted league ${selectedLeague.value.name}.`)\r\n                    // location.reload()\r\n                } catch(ex) {\r\n                    console.error('error deleting league', ex)\r\n                }\r\n            }\r\n\r\n            return {\r\n                teams,\r\n                leagues,\r\n                selectedTeam,\r\n                // teamWarning,\r\n                deleteTeam,\r\n                selectedLeague,\r\n                deleteLeague,\r\n            }\r\n        }\r\n    }\r\n</script>","import { render } from \"./DeleteView.vue?vue&type=template&id=492dd462\"\nimport script from \"./DeleteView.vue?vue&type=script&lang=js\"\nexport * from \"./DeleteView.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","class","style","_createElementBlock","_hoisted_1","_createBlock","_Suspense","default","_withCtx","_hoisted_2","_hoisted_3","_hoisted_4","onSubmit","_cache","_withModifiers","args","$setup","deleteTeam","_hoisted_5","_hoisted_6","_hoisted_7","_hoisted_8","id","$event","selectedTeam","_Fragment","_renderList","teams","team","key","value","name","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","deleteLeague","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","selectedLeague","leagues","league","_hoisted_17","_hoisted_18","_hoisted_19","_","API_URL","setup","ref","token","localStorage","getItem","AuthService","decodeToken","role","router","push","onMounted","async","teamsResponse","axios","get","data","leaguesResponse","ex","console","error","t","log","delete","team1","team2","alert","arr","forEach","length","pop","__exports__","render"],"sourceRoot":""}